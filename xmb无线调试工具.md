## 构思阶段

软硬件具备功能

- ADC电信号采集（电平数据）
  - 100kHz全速DMA采样wifi发出

- PWM电信号采集（频率，占空比）
  - 定时器高低电平触发并计算时间

- 基于DAP协议+USBIP的远程调试方案
  - 目前可能只支持esp32，不支持esp32C3

- 串口监听
- PWM，DAC，串口反向模拟
  - PWM定时器模拟
  - DAC模拟
  - 串口透传模拟

- （以下为二代工作）I2C，SPI监听与模拟
- TWAI（can总线）监听与模拟
- 多个调试工具根据指令联动



硬件设计标准

- ESP32­WROOM­32E（不能用ESP32C3了，因为没有DAC）

- 使用单线即可完成数据采集的方案，所有接口功能无需改线

  - 每个调试工具提供3个接口给用户接入信号
    - 这三个接口不能随机选
      - 目前我想的是如下：
      - IO34 ——GPIO34——ADC1_CH6
      - IO25 ——GPIO25——DAC_——ADC2_CH8
      - IO26—— GPIO26——DAC_2——ADC2_CH9
    - 虽然理论上IO矩阵可以把很多信号导向任意接口，但是ADC，DAC是特殊的

- 不对称接口，同步模拟操作数据

  - 设想是5p？电源，地，三个io
  - 三个io口应该分别是：
    - 暂时可以自己选？
    - 除了jtag，上面三个口和IO0（烧录）

- 留出烧录接口

  - IO0需要留出用于烧录，注意需要默认拉高
    - ![image-20220813153505456](https://github.xutongxin.me/https://raw.githubusercontent.com/xutongxin1/PictureBed/master/img0/image-20220813153505456.png)
    - 留出RXTX来烧录

- 一代留出调试jtag接口（要查手册是哪三个口）

  - IO12,13,14,15

- 三个接口的钳压电路

  - 由于需要一个口支持ADC，一个支持DAC，一个口两个都支持
  - 关于ADC的口，希望最多兼容到12v（通过换电阻或别的形式实现），3.3V就是0欧电阻就好

- 电源指示灯，一个IO灯供程序指示使用

  



上位机设计标准

- 统一的基于QT的界面管理上位机
  - 暂时用QT5.12

- 串口与TCP服务器打开，收取数据
  - 收取数据后选择把数据流如何处理
    - 如赋值变量（绘图），打印到另一个监视器中
    - 处理方式可以选择逗号回车分隔，json化，

- ADC数据二级解析，支持表达式
- 支持指令模拟（DAC，PWM）
- 支持数据触发的信息收集工作
- 支持对调试器OTA更新固件
- ADC波形图（示波器），带自动分析功能
- （二代后）支持自动识别层叠关系
- 支持功能模板载入
- 支持指令预载同步触发
- 支持调参与辅助调参



本项目目前计划至少为一代开源

一代计划在1个月内完成开发，然后致力于迭代与优化



